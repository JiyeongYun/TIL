## 실습을 통해서 JPA 연관관계 Intellij 프로젝트에 적용하기

* 테이블을 설계하게 되면 그것에 맞는 Entity 생성 필요

## ** Entity 생성

- 확인하기

    <img width="839" alt="스크린샷 2020-10-28 오전 2 03 42" src="https://user-images.githubusercontent.com/30459523/97335967-d074c380-18c1-11eb-91ea-fa4761076fcf.png">

    <img width="742" alt="스크린샷 2020-10-28 오전 2 03 50" src="https://user-images.githubusercontent.com/30459523/97335988-d5397780-18c1-11eb-9f8b-f80de24a6928.png">


    1. model > entity > 새로운 테이블에 대한 Class 생성 (Item.java, OrderDetail.java)
        - Entity: 자바의 Camel case와 DB의 snake case를 매칭시켜 줌.
    2. @Data, @AllArgsConstructor, @NoArgsConstructor, @Entity annotation을 추가
    3. 테이블에 있는 컬럼들과 같은 이름을 가진 변수들 생성
    4. Primary 키(Id)에 대해서 @Id 와 @GeneratedValue(strategy=GenerationType.IDENTITY) 를 추가
    

## ** Repository 생성

### 각 Entity마다 repository가 있어야 한다.

- 확인하기
    1. Java → model 패키지 → Repository 패키지 → Interface 파일로 Repository 생성
    2. @Repository 추가
    3. JpaRepository extend 해주기 

        ```java
        @Repository
        public interface ItemRepository extends JpaRepository<T, idType> {}
        	// ex) extends JpaRepository(Item, Long)
        ```



## **Entity와 Repository 작동 확인

- 확인하기
    1. test.java.com.example.study > repository > ItemRepositoryTest.java, OrderDetailRepositoryTest.java 생성
    2. StudyApplicationTests extend 하기

        ```java
        public class ItemRepositoryTest extends StudyApplicationTests
        ```

    3. Test 할 Repository 변수 생성 + @Autowired 

        ```java
        @Autowired
        private ItemRepository itemRepository;
        ```

    4. Test 할 method 생성 + @Test (옵션: @Transactional)

        ```java
        @Test
        public void create(){
        	// 1. Create a object
          Item item = new Item();
                
          // 2. Set the info
          item.setName("노트북");
          item.setPrice(100000);
          item.setContent("삼성 노트북");
                
          // 3. Save
          Item newItem = itemRepository.save(item);
                
          // 4. Check 
          Assert.assertNotNull(newItem);
        }
        ```

        - newItem: 그냥 Item이 아니라 save가 잘 작동한 것을 보기 위함. save가 정상적으로 잘 작동했으면 save된 아이템을 돌려주므로 Not null이 맞음.
